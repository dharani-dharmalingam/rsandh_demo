import{aE as k,aF as y,a as o,d as F,cx as M,aR as U,d3 as j,b5 as D,d4 as I,d5 as O,cQ as L,bc as N,d6 as Q,cb as R,d2 as T,d7 as V,c$ as W,h as q}from"./sanity.config-DBYEa_P1.js";function z(s){return k(function(e,t){var r=!1,i=0;e.subscribe(y(t,function(a){return(r||(r=!s(a,i++)))&&t.next(a)}))})}const A=s=>{const e=F.c(16),{comlink:t,refs:r,perspective:i}=s,a=M(),c=U();let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=new j,e[0]=p):p=e[0];const g=p;let u;e[1]!==a||e[2]!==i||e[3]!==c?(u=g.asObservable().pipe(D(w=>O(w.map(n=>{const P={...n,_id:L(n._id)},E=i==="published"?N:a.observeForPreview(P,c.get(P._type)).pipe(Q(),z(B)),x={...n,_id:R(n._id)},$=a.observeForPreview(x,c.get(x._type));return T($.pipe(V(E)),E).pipe(W(C),q(G))}))),I(0)),e[1]=a,e[2]=i,e[3]=c,e[4]=u):u=e[4];const l=u;let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[5]=d):d=e[5];const S=o.useRef(d);let b,m;e[6]!==t||e[7]!==l?(b=()=>{const w=l.subscribe(n=>{t.post("presentation/preview-snapshots",{snapshots:n}),S.current=n});return()=>{w.unsubscribe()}},m=[t,l],e[6]=t,e[7]=l,e[8]=b,e[9]=m):(b=e[8],m=e[9]),o.useEffect(b,m);let f,h;e[10]!==t?(f=()=>t.on("visual-editing/preview-snapshots",()=>({snapshots:S.current})),h=[t],e[10]=t,e[11]=f,e[12]=h):(f=e[11],h=e[12]),o.useEffect(f,h);let v,_;return e[13]!==r?(v=()=>{g.next(r)},_=[r,g],e[13]=r,e[14]=v,e[15]=_):(v=e[14],_=e[15]),o.useEffect(v,_),null};var J=o.memo(A);function B(s){return s.snapshot===null}function C(s){return!!s.snapshot}function G(s){const e=s.snapshot;return{_id:R(e._id),title:e.title,subtitle:e.subtitle,description:e.description,imageUrl:e.imageUrl}}export{J as default};
